<?xml version="1.0"?>
<launch>

    <!-- Arguments -->
    <arg name="configuration_basename" default="agv_robot.lua"/>
    <arg name="slam_methods" default="online_cartographer" doc="slam type [online_cartographer, offline_cartographer,gmapping]"/>

    <!-- agv model -->
    <!-- <include file="$(find agv_description)/launch/a2dr_description.launch" /> -->

    <!-- urglidar -->
    <!-- <include file="$(find agv_sensor)/launch/includes/urglidar.launch" /> -->

    <!-- BASE BRING UP -->
    <include file="$(find agv_bringup)/launch/agv_bringup.launch" />

    <!-- Bag scan -->
    <node pkg="rosbag" type="record" name="record_scan" args="-O $(find agv_bag)/bags/agv_cartographer.bag /scan"/>
    
    <node pkg="cartographer_ros" type="cartographer_node" name="cartographer_node" args="
        -configuration_directory $(find agv_description)/config
        -configuration_basename $(arg configuration_basename)" output="screen"/>

    <node pkg="cartographer_ros" type="cartographer_occupancy_grid_node" name="cartographer_occupancy_grid_node" args="-resolution 0.05"/>

     <!-- rviz -->
    <node name="rviz" pkg="rviz" type="rviz" required="true" args="-d $(find agv_slam)/rviz_config/agv_$(arg slam_methods).rviz"/>

</launch>
